generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

model User {
  id            String   @id @default(uuid())
  username      String   @unique
  passwordHash  String
  userAuthToken String   @unique
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  role          String   @default("client")
  client        Client[]
}

model Client {
  id                      Int       @id @default(autoincrement())
  user                    User?     @relation(fields: [userId], references: [id])
  userId                  String?
  firstName               String
  middleName              String
  lastName                String
  nameSuffix              String?
  age                     Int
  sex                     String
  address                 String
  email                   String?
  contactNumber           String?
  civilStatus             String?
  religion                String?
  citizenship             String?
  educationalAttainment   String?
  language                String?
  individualMonthlyIncome Decimal?
  detained                Boolean?
  detainedAt              String?
  detainedSince           DateTime?
  spouseName              String?
  spouseAddress           String?
  spouseContactNumber     String?
  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt
  deletedAt               DateTime?
  deleted                 Boolean   @default(false)
  request                 Request[]
}

model Request {
  id          Int       @id @default(autoincrement())
  clientId    Int
  requestType String
  requestDate DateTime
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  deletedAt   DateTime?
  deleted     Boolean   @default(false)
  client      Client    @relation(fields: [clientId], references: [id])
}
