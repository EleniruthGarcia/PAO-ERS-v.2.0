on:
  push:
    branches:
      - master
  workflow_dispatch:
jobs:
  deploy:
    runs-on: self-hosted
    steps:
      - name: Deploy to server
        run: |
          cd ..
          git pull origin master
          docker compose down
          docker compose build app --no-cache
          docker compose up database -d
          docker compose up app -d --force-recreate
          echo "Successfully deployed server"